!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).rainCore={})}(this,(function(e){"use strict";const t="__isReactive",n="__raw";function u(e){return"object"==typeof e&&null!=e}function r(e){return!(!e||!e.__isReactive)}function i(e){return!(!e||!e.__isRef)}function s(e,t){return e!==t&&!(Number.isNaN(e)||Number.isNaN(t))}const l=[];let o;function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=()=>{try{return l.push(n),o=n,e()}finally{l.pop(),o=l[l.length-1]}};return t.lazy||n(),n.scheduler=t.scheduler,n}const a=new WeakMap;function f(e,t){if(!o)return;let n=a.get(e);n||a.set(e,n=new Map);let u=n.get(t);u||n.set(t,u=new Set),o.deps=u,u.add(o)}function h(e,t,n){const u=a.get(e);if(!u)return;const r=u.get(t);r&&r.forEach((e=>{e.scheduler?e.scheduler(e,n):e()}))}const d=new WeakMap;function _(e){return u(e)?r(e)?e:d.has(e)?d.get(e):function(e){const r=e,i=new Proxy(e,{get(e,i,s){if(i===t)return!0;if(i===n)return r;const l=Reflect.get(e,i,s);return f(e,i),u(l)?_(l):l},set(e,t,n,u){const r=e[t],i=e.length,l=Reflect.set(e,t,n,u);return s(r,n)&&(h(e,t,n),function(e){return Array.isArray(e)}(e)&&e.length!==i&&h(e,"length")),l}});return d.set(e,i),i}(e):e}class v{constructor(e){this.__isRef=!0,this.__rawValue=e,this._value=p(e)}get value(){return f(this,"value"),this._value}set value(e){s(this._value,e)&&(this._value=p(e),this.__rawValue=e,h(this,"value",e))}}function p(e){return u(e)?_(e):e}class y{constructor(e,t){this._setter=t,this._value=void 0,this._dirty=!0,this.effect=c(e,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,h(this,"value",this._value))}})}get value(){return this._dirty&&(this._value=this.effect(),this._dirty=!1,f(this,"value")),this._value}set value(e){this._setter(e)}}e.computed=function(e){let t,n;var u;return"function"==typeof(u=e)&&null!=u?(t=e,n=()=>{console.warn("Write operation failed: computed value is readonly")}):(t=e.get,n=e.set),new y(t,n)},e.isReactive=r,e.isRef=i,e.reactive=_,e.ref=function(e){return i(e)?e:new v(e)},e.toRaw=function(e){if(r(e))return e[n]},e.unRef=function(e){return i(e)?e.value:e},e.watch=function(e,t){let n=i(e)?e.value:e(),u=c((()=>i(e)?e.value:e()),{scheduler:(e,u)=>{t(u,n),n=u}});const r=u.deps;return function(){r.delete(u),u=null,n=null}},e.watchEffect=function(e){let t=c(e);const n=t.deps;return function(){n.delete(t),t=null}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=rainCore.min.js.map
